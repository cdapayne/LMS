<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Teacher Dashboard – School LMS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js'></script>

</head>
<body>
  <%- include('header', { user: { role: 'teacher' } }) %>
  <div class="container py-4">
    <h2>Teacher Dashboard</h2>
    <p>Welcome, <strong><%= teacher.name %></strong>!</p>
    <div class="list-group">
      <% classes.forEach(k => { %>
        <a class="list-group-item list-group-item-action" href="/teacher/classes/<%= k.id %>">
          <div class="fw-bold"><%= k.name %></div>
          <div class="small text-muted"><%= (k.schedule||[]).map(s=> s.day + ' ' + s.time).join(' • ') %></div>
        </a>
      <% }); %>
    </div>
  </div>
    <div id="calendar" class="bg-white p-3 border rounded"></div>
  <script>
document.addEventListener('DOMContentLoaded', function() {
  const calendarEl = document.getElementById('calendar');
const calendar = new FullCalendar.Calendar(calendarEl, {
  initialView: 'dayGridMonth',
  height: 'auto',
  validRange: function(nowDate) {
    return {
      start: nowDate,
      end: new Date(nowDate.getFullYear(), nowDate.getMonth(), nowDate.getDate() + 21)
    };
  },
  headerToolbar: {
    left: 'prev,next today',
    center: 'title',
    right: 'dayGridMonth,timeGridWeek,listWeek'
  },
  eventClick: function(info) {
    info.jsEvent.preventDefault();
    if (info.event.url) {
      window.location.href = info.event.url; // go to class or test
    }
  }
});

  calendar.render();
});
</script>
</body>
</html>
