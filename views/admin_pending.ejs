<!DOCTYPE html>
<html><head>
<meta charset="utf-8"><title>Approvals â€“ Admin</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head><body class="bg-light">
<div class="container py-5">
  <h1 class="mb-4">Pending Student Approvals</h1>
  <% if (!pending.length) { %>
    <div class="alert alert-success">No pending registrations.</div>
  <% } else { %>
  <table class="table table-striped align-middle">
    <thead><tr><th>Name</th><th>Username</th><th>Email</th><th>Student ID</th><th>Applied</th><th>Docs</th><th>Actions</th></tr></thead>
    <tbody>
      <% pending.forEach(p => { %>
        <tr>
          <td><%= p.name %></td>
          <td><%= p.username %></td>
          <td><%= p.email %></td>
          <td><%= p.profile?.studentId || '-' %></td>
                    <td><%= p.appliedAt ? new Date(p.appliedAt).toLocaleDateString() : '-' %></td>

           <td><%= p.profile?.course || '-' %></td>
          <td><%= p.profile?.affiliateProgram || '-' %></td>
          <td><a class="btn btn-sm btn-outline-secondary" href="/admin/students/<%= p.id %>">View</a></td>
          <td class="d-flex gap-2">
            <form method="post" action="/admin/approve/<%= p.id %>"><button class="btn btn-sm btn-success">Approve</button></form>
            <form method="post" action="/admin/decline/<%= p.id %>"><button class="btn btn-sm btn-danger">Decline</button></form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  <% } %>
  <a href="/admin" class="btn btn-link">Back to dashboard</a>
</div>
</body></html>
